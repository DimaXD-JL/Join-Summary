<div class="shaddowBox" [class.closing]="isClosing" (click)="closeDialog()">
  <div
    class="add_dialog_wrapper"
    [class.closing]="isClosing"
    (click)="$event.stopPropagation()"
  >
    <div class="close2">
      <img src="/assets/icons/close-white.png" (click)="closeDialog()" />
    </div>
    <div class="leftFrame">
      <img src="/assets/logo/logo.png" alt="Join-logo" />
      <p>Edit contact</p>
    </div>

    <div class="middleFrame">
      <div
        class="avatar"
        [ngClass]="{ 'with-initials': name }"
        [ngStyle]="{ 'background-color': avatarColor }"
      >
        <div *ngIf="name" class="initials">{{ getInitials(name) }}</div>
      </div>

      <div class="rightFrame">
        <div class="close">
          <img src="/assets/icons/close.png" (click)="closeDialog()" />
        </div>
        <div
          class="input_wrapper"
          [class.error]="nameInput.invalid && nameInput.touched"
        >
          <div class="input_container">
            <label *ngIf="isNameFocused || name" class="floating_label"
              >Name</label
            >
            <input
              [(ngModel)]="name"
              #nameInput="ngModel"
              type="text"
              class="input_name"
              required
              pattern="^[a-zA-ZäöüÄÖÜß\s\-]+$"
              (focus)="isNameFocused = true"
              (blur)="isNameFocused = false"
            />
            <p
              *ngIf="nameInput.invalid && nameInput.touched"
              class="errorMessage"
            >
              Name required
            </p>
          </div>
        </div>

        <div
          class="input_wrapper"
          [class.error]="emailInput.invalid && emailInput.touched"
        >
          <div class="input_container">
            <label *ngIf="isFocused || email" class="floating_label"
              >Email</label
            >
            <input
              [(ngModel)]="email"
              #emailInput="ngModel"
              type="email"
              class="input_email"
              required
              pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}"
              (focus)="isFocused = true"
              (blur)="isFocused = false"
            />
            <p
              *ngIf="emailInput.invalid && emailInput.touched"
              class="errorMessage"
            >
              Email required
            </p>
          </div>
        </div>

        <div
          class="input_wrapper"
          [class.error]="phoneInput.invalid && phoneInput.touched"
        >
          <div class="input_container">
            <label *ngIf="isPhoneFocused || phone" class="floating_label"
              >Telefon</label
            >
            <input
              [(ngModel)]="phone"
              #phoneInput="ngModel"
              type="tel"
              class="input_phone"
              required
              pattern="^[0-9+\s]+$"
              (focus)="isPhoneFocused = true"
              (blur)="isPhoneFocused = false"
            />
            <p
              *ngIf="phoneInput.invalid && phoneInput.touched"
              class="errorMessage"
            >
              Number required
            </p>
          </div>
        </div>
        <div class="btn_wrapper">
          <button class="cbtn" (click)="deleteContact()">Delete</button>
          <button
            class="btn createBtn"
            [disabled]="
              nameInput.invalid || emailInput.invalid || phoneInput.invalid
            "
            [ngClass]="{
              hover: !(
                nameInput.invalid ||
                emailInput.invalid ||
                phoneInput.invalid
              )
            }"
            (click)="updateContact()"
          >
            Save
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
